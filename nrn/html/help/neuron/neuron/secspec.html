<h1><a name="CurrentlyAccessedSection">CurrentlyAccessedSection</a></h1>
<pre>
<a href="geometry.html#Section">Section</a>
   <a href="secspec.html#access">access</a>         <a href="secspec.html#forsec">forsec</a>         <a href="secspec.html#pop_section">pop_section</a>    
   <a href="secspec.html#forall">forall</a>         <a href="secspec.html#ifsec">ifsec</a>          <a href="secspec.html#push_section">push_section</a>   
</pre>
Since sections share property names eg. a length called <code>L</code>
it is always necessary to specify
<em>which</em> section is being discussed.
<p>
  There are three methods
of specifying which section a property refers to (with each being
compact in some contexts and cumbersome in others). They are given
below in order of precedence (highest first).
<dl>
<dt> Dot notation.
<dd> This takes precedence over the other methods and
is described by the syntax <var>sectionname</var><code>.</code>varname . Examples
are
<blockquote><pre>
dendrite[2].L = dendrite[1].L + dendrite[0].L
axon.v = soma.v
print soma.gnabar
axon.nseg = 2*axon.nseg
</pre></blockquote>
This notation is necessary when one needs to refer to more than
one section within a single statement.
<dt> Stack of sections.
<dd> The syntax is
<blockquote><pre>
sectionname {stmt}
</pre></blockquote>
and means that the currently selected section during the
execution of <var>stmt</var>
is <var>sectionname.</var> This method is the most useful for
programming since the user has explicit control over
the scope of the section and can set several range variables.
Notice that after the <var>stmt</var> is executed the currently selected
section reverts
to the name (if any) it had before <var>sectionname</var> was seen. The
programmer is allowed to
nest these statements to any level.   
Avoid the error:
<blockquote><pre>
        soma L=10 diam=10
</pre></blockquote>
which sets <code>soma.L</code>, then pops the section stack and sets <code>diam</code>
for whatever section is then on the stack.
<p>
It is important that control flow reach the end of <var>stmt</var> in order to
automatically pop the section stack. Therefore, one cannot use
the <code>continue, break, return</code> statements in <var>stmt.</var>
<p>
There is no explicit notion of a section variable in NEURON but the same
effect can be obtained with the <a href="classes/secref.html#SectionRef">SectionRef</a> class. The use of <a href="secspec.html#push_section">push_section</a>
for this purpose is not recommended except as a last resort.
<p>
Looping over sets of sections is done most often with the <a href="secspec.html#forall">forall</a> and <a href="secspec.html#forsec">forsec</a>
commands.
<p>
<dt> Default section.
<dd> The syntax
<blockquote><pre>
access sectionname
</pre></blockquote>
defines a default section name to be the currently selected section when the
first two methods are not in effect. There is often a conceptually
privileged section which gets most of the use and it is useful to
declare that as the default section. e.g.
<blockquote><pre>
access soma
</pre></blockquote>
With this, one can, with a minimum of typing, get values of voltage, etc
at
the command line level.
<p>
In general, this statement should only be used once to give default access
to a privileged section. It's bad programming practice to change the
default access within anything other than an initialization procedure.
The ``<code>sec { stmt }</code>'' form is almost always the right way to  
use the section stack.
</dl>
<p>
<p>
<p><hr><p>
<h1><a name="access">access</a></h1>
<pre>
<a href="secspec.html#CurrentlyAccessedSection">CurrentlyAccessedSection</a>
</pre>
<h2>SYNTAX</h2>
<code>access <var>section</var></code><br>
<code></code><br>
<h2>DESCRIPTION</h2>
 Makes <var>section</var> the default currently accessed section.
More precisely, it replaces the top of the section stack with the
indicated section and so will be the permanent default section only if
the section stack is empty or has only one section in it.
This is lesser
precedence than
  <code>section stmt</code>
which is lesser precedence than
  <code>section.var</code>
<p>
Note:
<p>
The access statement should not be used within a procedure or function. In
fact the best style is to execute it only once in a program to refer to
a priviledged section such as "soma". It can be very confusing when a
procedure has the side effect of permanently changing the default section.
<h2>EXAMPLES</h2>
<blockquote><pre>
create a, b, c, d
access a 
print secname() 
b { 
        print secname() 
        access c        // not recommended. The "go_to" of sections.
        print secname() 
        d {print secname()}
        print secname()
} // because the stack has more than one section, c is popped off
print secname()	// and the second "access" was not permanent!
</pre></blockquote>
<p>
<p><hr><p>
<h1><a name="forall">forall</a></h1>
<pre>
<a href="secspec.html#CurrentlyAccessedSection">CurrentlyAccessedSection</a>
</pre>
<h2>SYNTAX</h2>
<code>forall <var>stmt</var></code><br>
<code></code><br>
<h2>DESCRIPTION</h2>
Loops over all sections, successively making each section the currently
accessed section.
<p>
Within an object, <code>forall</code> refers to all the sections
declared in the object. This is generally the right thing to do when a template
creates sections but is inconvenient when a template is constructed which
needs to compute using sections external to it. In this case, one can pass a collection
of sections into a template function as a <a href="classes/seclist.html#SectionList">SectionList</a> object argument.
<p>
The <code>forall</code> is relatively slow,
especially when used in conjunction with <a href="nrnoc.html#issection">issection</a>
and <a href="nrnoc.html#ismembrane">ismembrane</a> selectors. If you are often iterating over the same
sets it is much faster to keep the sets in <a href="classes/seclist.html#SectionList">SectionList</a> objects and use
the much faster <a href="secspec.html#forsec">forsec</a> command.
<p>
The iteration sequence order is undefined but will remain the same for
a given sequence of <a href="topology.html#create">create</a> statements.
<p>
<h2>EXAMPLES</h2>
<blockquote><pre>
create soma, axon, dend[3]
forall {
	print secname()
}
</pre></blockquote>
prints the names of all the sections which have been created.
<blockquote><pre>
soma
axon
dend[0]
dend[1]
dend[2]
</pre></blockquote>
<p>
Note:
<p>
<h2>SEE ALSO</h2>
<a href="secspec.html#forsec">forsec</a> , <a href="secspec.html#ifsec">ifsec</a> , <a href="nrnoc.html#issection">issection</a> , <a href="classes/seclist.html#SectionList">SectionList</a> , <a href="nrnoc.html#ismembrane">ismembrane</a>
<p>
<p><hr><p>
<h1><a name="ifsec">ifsec</a></h1>
<pre>
<a href="secspec.html#CurrentlyAccessedSection">CurrentlyAccessedSection</a>
</pre>
<h2>SYNTAX</h2>
<code>ifsec string stmt</code><br>
<code>ifsec sectionlist stmt</code><br>
<h2>DESCRIPTION</h2>
<dl>
<dt> ifsec string stmt
<dd> Executes stmt if string is contained in the name of the currently
accessed section.  equivalent to if(issection(.*string.*)) stmt
Note that the regular expression semantics is not the same as that
used by issection. To get an exact match use
ifsec ^string$ 
<dt> ifsec sectionlist stmt
<dd> Executes stmt if the currently accessed section is in the sectionlist.
</dl>
<h2>SEE ALSO</h2>
<a href="secspec.html#forsec">forsec</a> , <a href="classes/seclist.html#SectionList">SectionList</a> , <a href="nrnoc.html#issection">issection</a>
<p>
<p><hr><p>
<h1><a name="forsec">forsec</a></h1>
<pre>
<a href="secspec.html#CurrentlyAccessedSection">CurrentlyAccessedSection</a>
</pre>
<h2>SYNTAX</h2>
<code>forsec string stmt</code><br>
<code>forsec sectionlist stmt</code><br>
<code></code><br>
<h2>DESCRIPTION</h2>
<dl>
<dt> forsec string stmt
<dd> equivalent to <code>forall ifsec string stmt</code> but faster.
Note that forsec string is equivalent to
<code>forall if (issection(".*string.*)) stmt</code>
<dt> forsec sectionlist
<dd> equivalent to <code>forall ifsec sectionlist stmt</code> but very fast.
</dl>
These provide a very efficient iteration over the list of sections.
<h2>EXAMPLES</h2>
<blockquote><pre>
create soma, dend[3], axon
forsec "a" print secname()
</pre></blockquote>
<blockquote><pre>
create soma, dend[3], axon
objref sl
sl = new SectionList()
for (i = 2; i &gt;= 0; i = i - 1) dend[i] sl.append()
forsec sl print secname()
</pre></blockquote>
<p>
<p><hr><p>
<h1><a name="pop_section">pop_section</a></h1>
<pre>
<a href="secspec.html#CurrentlyAccessedSection">CurrentlyAccessedSection</a>
</pre>
<h2>SYNTAX</h2>
<code> pop_section()</code><br>
<h2>DESCRIPTION</h2>
Take the currently accessed section off the section stack. This can only be used after
a function which pushes a section on the section stack such as
<code>point_process.getloc()</code>.
<h2>EXAMPLES</h2>
<blockquote><pre>
create soma[5]
objref stim[5]
for i=0,4 soma[i] stim[i] = new IClamp(i/4)
for i=0,4 {
	x = stim[i].get_loc()
	printf("location of %s is %s(%g)\n", stim[i], secname(), x)
	pop_section()
}
</pre></blockquote>
<p>
<p><hr><p>
<h1><a name="push_section">push_section</a></h1>
<pre>
<a href="secspec.html#CurrentlyAccessedSection">CurrentlyAccessedSection</a>
</pre>
<h2>SYNTAX</h2>
<code> push_section(<var>number</var>)</code><br>
<code>push_section(<var>section_name</var>)</code><br>
<h2>DESCRIPTION</h2>
This function, along with <code>pop_section()</code> should only be used as a last resort.  
It will place a specified section on the top of the section stack, 
becoming the current section to which all operations apply. It is
probably always better to use <a href="classes/secref.html#SectionRef">SectionRef</a> or <a href="classes/seclist.html#SectionList">SectionList</a> .
<dl>
<dt> <code>push_section(<var>number</var>)</code>
<dd>	Push the section identified by the number returned by
	this_section, etc. which you desire to be the currently accessed
	section. Any section pushed must have a corresponding pop_section()
	later or else the section stack will be corrupted. The number is
	not guaranteed to be the same across separate invocations of NEURON.
<dt> push_section(<var>section_name</var>)
<dd>	Push the section identified by the name obtained
	from sectionname(<var>strdef</var>). Note: at this time the implementation
	iterates over all sections to find the proper one; so do not use
	in loops.
</dl>
<h2>SEE ALSO</h2>
<a href="classes/secref.html#SectionRef">SectionRef</a>
<p>
<p>
<p><hr><p>
<date>
neuron/neuron/secspec.hel : Sep 21 09:30
